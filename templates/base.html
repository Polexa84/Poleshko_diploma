<!DOCTYPE html>
<html lang="ru" data-bs-theme="light"> {# <-- Добавлен атрибут data-bs-theme="light" #}
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Бронирование столиков{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    {# --- СТИЛИ ДЛЯ ТЕМЫ --- #}
    <style id="theme-styles">
        /* Определяем переменные для светлой темы (по умолчанию) */
        :root {
            --bs-body-bg: #ffffff; /* Белый фон */
            --bs-body-color: #212529; /* Темный текст */
            --bs-navbar-bg: #f8f9fa; /* Светлая navbar */
            --bs-navbar-color: #212529; /* Темный текст в navbar */
            --bs-card-bg: #ffffff; /* Белый фон карточек */
            --bs-card-color: #212529; /* Темный текст в карточках */
            --bs-primary: #0d6efd; /* Синий цвет для основных кнопок */
        }

        /* Переопределяем переменные для темной темы */
        [data-bs-theme="dark"] {
            --bs-body-bg: #212529; /* Темный фон */
            --bs-body-color: #f8f9fa; /* Светлый текст */
            --bs-navbar-bg: #343a40; /* Темная navbar */
            --bs-navbar-color: #f8f9fa; /* Светлый текст в navbar */
            --bs-card-bg: #343a40; /* Темный фон карточек */
            --bs-card-color: #f8f9fa; /* Светлый текст в карточках */
            --bs-primary: #6c757d; /* Серый цвет для основных кнопок */
        }

        /* Применяем переменные к элементам */
        body {
            background-color: var(--bs-body-bg);
            color: var(--bs-body-color);
            transition: background-color 0.3s, color 0.3s; /* Плавный переход */
        }
        .navbar {
            background-color: var(--bs-navbar-bg) !important; /* Важно для переопределения inline стилей */
            color: var(--bs-navbar-color) !important; /* Важно для переопределения inline стилей */
            border-bottom: 1px solid var(--bs-navbar-border-color, #dee2e6); /* Добавил border-color для navbar, если нужно */
            transition: background-color 0.3s, color 0.3s, border-color 0.3s;
        }
        .card {
            background-color: var(--bs-card-bg);
            color: var(--bs-card-color);
            transition: background-color 0.3s, color 0.3s;
        }
        .btn-primary {
            background-color: var(--bs-primary);
            border-color: var(--bs-primary);
            transition: background-color 0.3s, border-color 0.3s; /* Добавил transition для кнопки */
        }
        /* Если хотите, чтобы кнопки hover тоже меняли цвет плавно */
        .btn-primary:hover {
            filter: brightness(90%); /* Пример, как можно сделать hover-эффект */
        }
        [data-bs-theme="dark"] .btn-primary:hover {
            filter: brightness(110%); /* Пример для темной темы */
        }

    </style>
    {# --- КОНЕЦ СТИЛЕЙ ДЛЯ ТЕМЫ --- #}

</head>
<body>
    {% include 'navigation.html' %}

    <div class="container mt-3">
        {% block content %}
        {% endblock %}
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    {# --- СКРИПТ ДЛЯ ПЕРЕКЛЮЧЕНИЯ ТЕМЫ --- #}
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const themeToggleBtn = document.getElementById('theme-toggle'); // Получаем ссылку на кнопку
            const htmlElement = document.documentElement; // Получаем элемент <html>

            // localStorage: Проверяем, есть ли сохраненная тема, и устанавливаем её
            const savedTheme = localStorage.getItem('theme') || 'light'; // Значение по умолчанию 'light'
            htmlElement.setAttribute("data-bs-theme", savedTheme); // Устанавливаем тему на <html>

            // Обновляем текст кнопки в соответствии с текущей темой
            if (savedTheme === 'dark') {
                themeToggleBtn.textContent = 'Светлая тема';
            } else {
                themeToggleBtn.textContent = 'Темная тема';
            }

            if (themeToggleBtn) { // Если кнопка существует
                themeToggleBtn.addEventListener('click', function() { // Добавляем обработчик клика
                    const currentTheme = htmlElement.getAttribute("data-bs-theme"); // Текущая тема
                    const newTheme = currentTheme === "dark" ? "light" : "dark"; // Вычисляем новую тему
                    htmlElement.setAttribute("data-bs-theme", newTheme); // Устанавливаем новую тему на <html>
                    localStorage.setItem('theme', newTheme); // Сохраняем выбор в localStorage

                    // Обновляем текст кнопки
                    themeToggleBtn.textContent = newTheme === "dark" ? "Светлая тема" : "Темная тема";
                });
            }
        });
    </script>
    {# --- КОНЕЦ СКРИПТА ДЛЯ ПЕРЕКЛЮЧЕНИЯ ТЕМЫ --- #}
</body>
</html>