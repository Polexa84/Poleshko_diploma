<!DOCTYPE html>
<html lang="ru" data-bs-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Бронирование столиков{% endblock %}</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    {# --- СТИЛИ ДЛЯ ТЕМЫ --- #}
    <style id="theme-styles">
        /* Определяем переменные для светлой темы (по умолчанию) */
        :root {
            --bs-body-bg: #fff;
            --bs-body-color: #212529;
            --bs-navbar-bg: #f8f9fa;
            --bs-navbar-color: #212529;
            --bs-navbar-border-color: #dee2e6;
            --bs-card-bg: #fff;
            --bs-card-color: #212529;
            --bs-primary: #0d6efd;
        }

        /* Темная тема */
        [data-bs-theme="dark"] {
            --bs-body-bg: #212529;
            --bs-body-color: #f8f9fa;
            --bs-navbar-bg: #343a40;
            --bs-navbar-color: #f8f9fa;
            --bs-navbar-border-color: #495057;
            --bs-card-bg: #343a40;
            --bs-card-color: #f8f9fa;
            --bs-primary: #6610f2;
        }

        /* Применяем переменные к элементам */
        body {
            background-color: var(--bs-body-bg);
            color: var(--bs-body-color);
            transition: background-color 0.3s, color 0.3s;
        }
        .navbar {
            background-color: var(--bs-navbar-bg) !important;
            color: var(--bs-navbar-color) !important;
            border-bottom: 1px solid var(--bs-navbar-border-color, #dee2e6);
            transition: background-color 0.3s, color 0.3s, border-color 0.3s;
        }
        .card {
            background-color: var(--bs-card-bg);
            color: var(--bs-card-color);
            transition: background-color 0.3s, color 0.3s;
        }
        .btn-primary {
            background-color: var(--bs-primary);
            border-color: var(--bs-primary);
            transition: background-color 0.3s, border-color 0.3s;
        }
        .btn-primary:hover {
            filter: brightness(90%);
        }
        [data-bs-theme="dark"] .btn-primary:hover {
            filter: brightness(110%);
        }
    </style>
    {# --- КОНЕЦ СТИЛЕЙ ДЛЯ ТЕМЫ --- #}


</head>
<body>
    {% include 'navigation.html' %}

    <div class="container mt-3">
        {# --- ДОБАВЛЯЕМ ОТОБРАЖЕНИЕ СООБЩЕНИЙ ЗДЕСЬ --- #}
        {% if messages %}
            <ul class="messages">
                {% for message in messages %}
                    <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
                {% endfor %}
            </ul>
        {% endif %}

        {% block content %}
        {% endblock %}
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>


    {# --- СКРИПТ ДЛЯ ПЕРЕКЛЮЧЕНИЯ ТЕМЫ --- #}
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const themeToggleBtn = document.getElementById('theme-toggle');
            const htmlElement = document.documentElement;

            const savedTheme = localStorage.getItem('theme') || 'light';
            htmlElement.setAttribute("data-bs-theme", savedTheme);

            if (savedTheme === 'dark') {
                if (themeToggleBtn) themeToggleBtn.textContent = 'Светлая тема';
            } else {
                if (themeToggleBtn) themeToggleBtn.textContent = 'Темная тема';
            }

            if (themeToggleBtn) {
                themeToggleBtn.addEventListener('click', function() {
                    const currentTheme = htmlElement.getAttribute("data-bs-theme");
                    const newTheme = currentTheme === "dark" ? "light" : "dark";
                    htmlElement.setAttribute("data-bs-theme", newTheme);
                    localStorage.setItem('theme', newTheme);

                    themeToggleBtn.textContent = newTheme === "dark" ? "Светлая тема" : "Темная тема";
                });
            }
        });
    </script>
    {# --- КОНЕЦ СКРИПТА ДЛЯ ПЕРЕКЛЮЧЕНИЯ ТЕМЫ --- #}
</body>
</html>